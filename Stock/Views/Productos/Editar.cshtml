@model Stock.Models.Producto
@using Microsoft.AspNetCore.Authorization

<div class="container mt-5" style="max-width: 500px;">
    <div class="card shadow p-4">
        <h3 class="mb-4 text-warning">✏️ Editar Producto: @Model.Nombre</h3>

        @{
            
            bool isAdmin = User.IsInRole("Administrativo");
            string controllerName = isAdmin ? "Admin" : "Productos";
            string actionName = isAdmin ? "EditarProducto" : "Editar";
        }

        <form asp-action="@actionName" asp-controller="@controllerName" method="post">

            <input type="hidden" asp-for="Id" />

            

            @if (isAdmin)
            {
                
                <div class="mb-3">
                    <label asp-for="IdProveedor" class="form-label">Asignar a Proveedor</label>
                    <select asp-for="IdProveedor" asp-items="@(ViewBag.Proveedores as SelectList)" class="form-control" required>
                        <option value="">-- Seleccione un Proveedor --</option>
                    </select>
                </div>
                
            }
            else
            {
                
                <input type="hidden" asp-for="IdProveedor" />
            }


            <div class="mb-3">
                <label asp-for="Nombre" class="form-label">Nombre del Producto</label>
                <input asp-for="Nombre" class="form-control" required />
            </div>

            <div class="mb-3">
                <label asp-for="Descripcion" class="form-label">Descripción</label>
                <textarea asp-for="Descripcion" class="form-control" rows="3"></textarea>
            </div>

            <div class="mb-4">
                <label asp-for="Precio" class="form-label">Precio Unitario ($)</label>
                <input asp-for="Precio" type="number" step="0.01" class="form-control" required />
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-warning btn-lg">Guardar Cambios</button>
                
                <a asp-action="@(isAdmin ? "GestionProductos" : "Index")" asp-controller="@controllerName" class="btn btn-secondary">Cancelar</a>
            </div>
        </form>
    </div>
</div>